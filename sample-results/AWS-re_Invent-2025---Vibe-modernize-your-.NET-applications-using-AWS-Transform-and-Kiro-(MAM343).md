

### **Video Details**

*   **Title:** Code Talk: Modernize legacy .NET applications with agentic AI (The title is inferred from the content and context of a re:Invent session, the actual YouTube video might have a different title)
*   **URL:** [https://www.youtube.com/watch?v=Ff32zqeOKcg](https://www.youtube.com/watch?v=Ff32zqeOKcg&list=PLgnMqMZbzhHwPNoX74nwLbqH67Oo5R_IP&index=11&t=13s&pp=gAQBiAQB0gcJCRUKAYcqIYzv)
*   **Speakers:** Alex (based in London, UK) and Prasad (based in Stockholm, Sweden)
*   **Event:** AWS re:Invent (implied by the opening question "How is re:Invent?")
*   **Format:** "Code Talk," emphasizing live coding and demonstrations over PowerPoint slides.

---

### **Executive Summary**

This "Code Talk" session provides a comprehensive, step-by-step demonstration of modernizing a legacy .NET Framework application into a cloud-native, microservices-based architecture running on AWS. The speakers, Alex and Prasad, use two primary "Agentic AI" tools: **AWS Transform for .NET** for the initial porting and **CoderPad Kira (referred to as Kira or Ko)** for iterative refactoring, debugging, and infrastructure deployment.

The session follows a seven-step journey, starting with a monolithic ASP.NET application ("Kontoso University") that uses Windows-specific components like SQL Server and MSMQ. Through a series of live-coding segments, they transform it into a modern solution featuring a React front-end, .NET 8 Web API microservices, PostgreSQL, and Amazon SQS, all deployed on AWS using a CDK project generated by the AI. The presentation highlights the power of AI-assisted development to accelerate complex modernization tasks, reducing work that could take weeks into a matter of hours.

---

### **Detailed Analysis**

#### **1. Introduction and Core Problem**

The speakers set the stage by identifying their target audience: .NET developers managing legacy .NET Framework applications. They frame the modernization challenge around three key pillars:

1.  **Framework Modernization:** Moving from the Windows-only, proprietary .NET Framework to the modern, cross-platform .NET 8 (or newer long-term support versions).
2.  **Architecture Modernization:** Deconstructing a monolithic application into a more flexible architecture using patterns like microservices and event-driven design.
3.  **Infrastructure Modernization:** Migrating from on-premises Windows servers and IIS to cloud-native, often Linux-based, infrastructure like containers, serverless, or EC2 instances.

#### **2. The "Before" State: Kontoso University Application**

To provide a practical example, they use an open-source application called "Kontoso University."

*   **Technology Stack:**
    *   **Framework:** ASP.NET on .NET Framework 4.8.
    *   **Presentation Layer:** MVC controllers with Razor views.
    *   **Data Layer:** Entity Framework connected to a SQL Server database.
    *   **Messaging:** Microsoft Message Queue (MSMQ) for a notification service.
*   **Architecture:** A classic monolith with tightly coupled components, heavily reliant on the Windows ecosystem.

#### **3. The Tools: Agentic AI for Modernization**

Two key tools are showcased:

*   **AWS Transform for .NET:**
    *   An AWS service designed for large-scale modernization. It analyzes the source code, assesses compatibility, and automatically ports .NET Framework projects to modern .NET.
    *   The demo shows the new web console UI, where a user connects a GitHub repository, selects projects, and runs a transformation job. The output is a new branch in the repository with the ported code.
    *   It's presented as the tool for the initial, undifferentiated heavy lifting of the porting process.

*   **CoderPad Kira (Ko):**
    *   An AI-powered IDE (a fork of VS Code) that assists developers by understanding intent expressed in natural language.
    *   **VIP (Vibe) Coding:** A prompt-driven, conversational style used for smaller, iterative tasks like fixing build errors, debugging runtime exceptions, and making targeted code changes.
    *   **Spec-Driven Development:** A more structured approach for complex tasks. Kira first generates a requirements document, then a detailed design document, and finally an implementation plan broken down into actionable tasks. The developer reviews and approves each stage, guiding the AI through the entire software development lifecycle (SDLC). This is highlighted as a key differentiator from other tools.

#### **4. The 7-Step Modernization Journey (The Live Demo)**

The core of the presentation is a live walkthrough of a seven-step modernization process.

**Step 1: Port from .NET Framework to .NET 8**
*   **Tool:** AWS Transform for .NET.
*   **Process:** Alex demonstrates creating a transformation job, connecting to a GitHub repo, and showing the result: a new branch with the project structure updated to .NET 8 (e.g., smaller `.csproj` file, `Program.cs`/`Startup.cs`, `appsettings.json`).

**Step 2: Fix Compile-Time Errors**
*   **Tool:** Kira (using VIP Coding).
*   **Process:** The ported code from Step 1 has build errors (e.g., NuGet package version conflicts, incorrect namespaces). Alex simply tells Kira, "I got build errors, please fix it." Kira analyzes the build output, identifies the issues, and applies fixes iteratively until the project builds successfully.

**Step 3: Replace SQL Server with PostgreSQL**
*   **Tool:** Kira (using VIP Coding and interactive debugging).
*   **Process:** The goal is to remove the dependency on SQL Server.
    1.  Alex instructs Kira to switch to a local PostgreSQL instance, providing the database name and credentials.
    2.  Kira adds the necessary NuGet packages (for PostgreSQL provider) and updates the connection string and `DbContext`.
    3.  During runtime, they encounter exceptions (e.g., PostgreSQL not supporting the `datetime2` type). Alex copies the stack trace and pastes it back into the Kira chat, which then finds and corrects the problematic code in the entity models.
    4.  This process is repeated for a few runtime errors, including seeding the database, showcasing a realistic "VIP debugging" workflow.

**Step 4: Replace MSMQ with Amazon SQS**
*   **Tool:** Kira (using **Spec-Driven Development**).
*   **Process:** This marks a shift to a more complex task.
    1.  Alex provides an intent: "I want to switch to SQS implementation."
    2.  Kira generates a **requirements document** (e.g., "notifications should be persistent," "use AWS SDK," "queue URL should be configurable").
    3.  After approval, Kira creates a **design document** specific to the project, outlining architectural changes, new dependencies, and code snippets.
    4.  Finally, it creates an **implementation plan** with a checklist of tasks (e.g., "add SDK dependency," "update notification service," "implement send/retrieve methods"). Alex then executes these tasks one by one with Kira's help.

**Step 5: Extract a Microservice**
*   **Tool:** Kira (Spec-Driven Development).
*   **Process:** The notification logic is extracted from the monolith. The specification generated by Kira includes requirements to create a separate Web API project, expose REST endpoints, and have the main application communicate with it via HTTP calls, ensuring decoupling.

**Step 6: Refactor UI from Razor Views to React**
*   **Tool:** Kira (Spec-Driven Development).
*   **Process:** This is the most extensive refactoring task.
    1.  The intent is to replace the server-side rendered UI with a modern single-page application (SPA).
    2.  Kira generates a massive list of tasks: setting up a backend API infrastructure (migrating MVC controllers to API controllers), creating DTOs, initializing a React app (with Vite and TypeScript), and then methodically building out each page and form (student list, course creation, etc.).
    3.  Alex notes this process took about 4-5 hours with Kira, compared to an estimated several weeks of manual effort.

**Step 7: Deploy to AWS with CDK**
*   **Tool:** Kira (Spec-Driven Development).
*   **Process:** The final step is to create Infrastructure as Code (IaC) to deploy the modernized application.
    1.  The intent is to create a CDK project in C# to deploy all components.
    2.  Kira generates a CDK project that provisions:
        *   An Amazon Aurora PostgreSQL database.
        *   EC2 instances for the backend API and the new notification microservice.
        *   An Application Load Balancer (ALB) with path-based routing.
        *   An S3 bucket and CloudFront distribution for the React front-end.
        *   Supporting resources like Secrets Manager.
    3.  Kira also generates the necessary deployment scripts, understanding the dependency order (e.g., deploy backend first to get the URL, then update the React app's configuration and deploy it).

#### **5. The "After" State: The Modernized Architecture**

The final architecture is fully cloud-native and distributed:
*   **Front-End:** A React application hosted on S3 and served via CloudFront.
*   **Back-End:** A .NET 8 Web API running on an EC2 Linux instance.
*   **Microservice:** The notification service is a separate .NET 8 Web API on its own EC2 instance.
*   **Database:** A managed Amazon Aurora PostgreSQL instance.
*   **Messaging:** An Amazon SQS queue.
*   **Security & Networking:** Secrets Manager for credentials and an ALB for routing traffic.

### **Conclusion and Key Takeaways**

The session successfully demonstrates that "Agentic AI" tools are no longer just for generating code snippets but can act as sophisticated partners in complex, multi-step software engineering projects like legacy modernization.

*   **Hybrid Tooling is Effective:** Using AWS Transform for the initial bulk conversion and then Kira for the nuanced, iterative refactoring proves to be a powerful combination.
*   **Spec-Driven Development is Key for Complexity:** While simple prompts are useful, the structured, reviewable process of spec-driven development is essential for managing large-scale changes like UI refactoring or microservice extraction.
*   **AI Accelerates, Not Replaces, the Developer:** Throughout the demo, the developer (Alex) is firmly in control, guiding the AI, reviewing its output, and providing the high-level intent and context. The AI automates the tedious and repetitive tasks, allowing the developer to focus on architecture and design decisions.
*   **Significant Time and Effort Savings:** The speakers repeatedly emphasize the dramatic reduction in development time, turning weeks or months of work into days or even hours.